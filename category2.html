<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <script>
        async function loadJSON() {
            try {
                const response = await fetch("http://localhost:8080/api/categories");
            }
            catch(error){
                console.log(error);
            }
        }



        async function search(pattern) {
            try {
                const response = await fetch("http://localhost:8080/api/categories");
                const data = await response.json();

                dataTable = document.getElementById("dataTable");

                for (var i in data) {
                    if (JSON.stringify(data[i].name).includes(pattern)) {
                        const row = document.createElement("tr");

                        const colId = document.createElement("td");
                        colId.textContent = data[i].id;

                        const colIcon = document.createElement("td");
                        const iconSpan = document.createElement("span");
                        iconSpan.classList.add("material-symbols-outlined");
                        iconSpan.textContent = data[i].icon;
                        colIcon.appendChild(iconSpan);

                        const colName = document.createElement("td");
                        colName.textContent = data[i].name;

                        const colEdit = document.createElement("td");
                        const editSpan = document.createElement("span");
                        editSpan.classList.add("material-symbols-outlined");
                        editSpan.textContent = data[i].editField;
                        colEdit.appendChild(editSpan);

                        const colDelete = document.createElement("td");

                        row.appendChild(colId);
                        row.appendChild(colIcon);
                        row.appendChild(colName);
                        row.appendChild(colEdit);
                        row.appendChild(colDelete);

                        console.log(data[i].name);
                        dataTable.appendChild(row);

                    }
                    else {
                        console.log("false");
                    }
                    //console.log(data[i].name);
                }
                console.log(data);
            }
            catch (error) {
                console.log(error);
            }
        } 
    </script>
</head>

<body onload="search('e')">
    <table width="80%" style="text-align: center;" id="dataTable">
        <tr>
            <td>header 1</td>
            <td>header 2</td>
            <td>header 3</td>
            <td>header 4</td>
            <td>header 5</td>
        </tr>

    </table>
</body>

</html>